const mongoose = require('mongoose');

const Schema = mongoose.Schema;

const activitySchema = new Schema({
	name: { type: String, required: true },
	description: { type: String, required: true },
	status: { type: String, required: true },
	dueDate: { type: Date, required: true },
	endDate: { type: Date },
	totalWorkedMinutes: { type: Number },
	totalWorkedTime: { type: Number },
	stages: [
		{
			stageId: { type: Schema.Types.ObjectId, ref: 'Stage' },
			no: { type: Number, required: true },
			tasks: [
				{
					taskId: { type: Schema.Types.ObjectId, ref: 'Task' },
					no: { type: Number, required: true },
				},
			],
		},
	],
});

// activitySchema.methods.addSettingElement = function addElement(v) {
// 	console.log('Provo ad aggiungere elemento al settaggio');
// 	// console.log(this);
// 	// console.log({ v });
// 	this.value.push(v);
// 	// console.log(this);
// };

module.exports = mongoose.model('Activity', activitySchema);
